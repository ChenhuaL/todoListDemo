# TODO List 项目说明文档

## 1. 技术选型

### 编程语言
- **后端**: Java (JDK 1.8)
  - **理由**: 成熟稳定，企业级应用首选，拥有强大的生态系统和丰富的框架支持。
- **前端**: HTML5, CSS3, JavaScript (原生)
  - **理由**: 无需额外构建工具，简单直接，适合快速开发小型应用，浏览器兼容性好。

### 框架/库
- **后端框架**: Spring Boot 2.6.13
  - **理由**: 简化了Spring应用的初始搭建和开发过程，内嵌Tomcat服务器，自动配置功能强大，适合快速开发RESTful API。
- **ORM框架**: Spring Data JPA
  - **理由**: 简化数据库操作，提供丰富的查询方法，减少样板代码，与Spring Boot无缝集成。
- **前端**: 原生JavaScript
  - **理由**: 无需额外依赖，直接使用现代浏览器API，减少项目复杂度和加载时间。

### 数据库/存储
- **主数据库**: MySQL
  - **理由**: 关系型数据库，成熟稳定，支持事务，适合存储结构化的待办事项数据。
  - **配置**: 本地开发环境使用MySQL，连接配置在`application.yml`中定义。

### 替代方案对比
- **后端替代方案**: 
  - Node.js + Express: 性能更好，但在企业级应用中Java生态更成熟
  - Python + Django/Flask: 开发效率高，但并发性能不如Java
- **前端替代方案**:
  - React/Vue/Angular: 组件化和状态管理更强大，但引入了更多依赖和构建复杂性
- **数据库替代方案**:
  - SQLite: 更轻量，但在多用户环境下性能不如MySQL
  - NoSQL数据库(MongoDB): 适合非结构化数据，但本项目数据结构简单，关系型数据库更合适

## 2. 项目结构设计

### 整体架构说明
本项目采用经典的前后端分离架构，但将前端静态资源直接部署在Spring Boot应用的`static`目录中，实现了单体应用的便捷性与前后端分离架构的清晰性。

- **前端层**: 负责用户界面和交互，通过AJAX调用后端API
- **后端层**: 提供RESTful API，处理业务逻辑，与数据库交互
- **数据层**: MySQL数据库，存储待办事项数据

### 目录结构示例
```
src/
  ├── main/
  │   ├── java/com/todolistdemo/
  │   │   ├── TodoListDemoApplication.java  # 应用入口
  │   │   ├── config/                      # 配置类
  │   │   │   └── CorsConfig.java          # CORS配置
  │   │   ├── controller/                  # 控制器
  │   │   │   └── TodoListController.java  # RESTful API端点
  │   │   ├── entity/                      # 实体类
  │   │   │   └── Item.java                # Todo项目实体
  │   │   ├── repository/                  # 数据访问层
  │   │   │   └── TodoListRepository.java  # JPA Repository
  │   │   └── service/                     # 服务层
  │   │       ├── TodoListService.java     # 服务接口
  │   │       └── impl/                    # 服务实现
  │   │           └── TodoListServiceImpl.java
  │   └── resources/
  │       ├── application.yml              # 应用配置
  │       └── static/                      # 前端静态资源
  │           ├── index.html               # 主页面
  │           ├── css/                     # 样式文件
  │           │   └── style.css
  │           ├── js/                      # JavaScript文件
  │           │   └── app.js
  │           └── lib/                     # 第三方库(预留)
  └── test/                                # 测试代码
```

### 模块职责说明

| 模块 | 主要职责 | 文件位置 | 说明 |
| ---- | ------- | ------- | ---- |
| 实体层 | 定义数据模型 | entity/Item.java | 包含待办事项的所有属性和JPA注解 |
| 数据访问层 | 数据库操作 | repository/TodoListRepository.java | 继承JpaRepository，提供CRUD操作 |
| 服务层 | 业务逻辑处理 | service/TodoListService.java | 定义业务接口和实现 |
| 控制器层 | 处理HTTP请求 | controller/TodoListController.java | 提供RESTful API端点 |
| 前端页面 | 用户界面 | static/index.html | 包含表单和列表展示 |
| 前端交互 | AJAX调用和DOM操作 | static/js/app.js | 处理用户交互和API调用 |
| 样式设计 | 页面样式定义 | static/css/style.css | 美化用户界面 |

## 3. 需求细节与决策

### 描述是否必填？如何处理空输入？
- **标题**: 必填字段，前端通过`required`属性进行验证，后端服务层不做空值检查，依赖前端验证。
- **描述**: 可选字段，为空时不影响功能。
- **分类**: 可选字段，默认为"default"。
- **优先级**: 可选字段，默认为1（最低优先级）。
- **截止日期**: 可选字段，为空时不设置。

### 已完成的任务在 UI 中的显示方式
- **视觉区分**: 已完成任务的标题显示为灰色并带有删除线。
- **交互变化**: 标记按钮的文本从"标记完成"变为"标记未完成"。
- **排序**: 已完成任务仍参与优先级排序，但视觉上更容易区分。

### 任务排序逻辑
- **默认排序**: 按优先级降序排序（优先级5最高，1最低）。
- **排序实现**: 在后端服务层的`query()`方法中通过Java 8 Stream API实现排序。
- **用户排序选择**: 目前版本未提供用户自定义排序选项，可在后续版本扩展。

### 扩展功能设计思路
- **分类功能**: 
  - 已实现基本分类标签展示
  - 后续可扩展为预定义分类选项和分类管理界面
- **优先级功能**: 
  - 已实现1-5的数值优先级和颜色标签展示
  - 可考虑增加自定义优先级名称（高/中/低/紧急等）
- **截止日期**: 
  - 已实现基本的日期时间选择和显示
  - 可扩展为截止日期提醒功能（前端定时检查）
- **搜索和过滤**: 
  - 可基于现有前端结构添加搜索框和过滤下拉菜单
  - 后端需增加相应的过滤查询API

## 4. AI 使用说明

### 是否使用 AI 工具？
- **使用的AI工具**: ChatGPT

### 使用 AI 的环节
1. **代码片段生成**:
   - 前端JavaScript异步函数实现（`fetch` API调用）

2. **Bug 定位**:
   - 解决JPA实体类与数据库表映射的问题(实体类entity拼写错误，导致建表失败，AI定位并指正)

3. **文档初稿编写**:
   - 提供项目说明文档的结构和部分内容
   - 优化技术选型部分的描述

### AI 输出的修改
- **前端交互逻辑**: AI初始方案使用`XMLHttpRequest`，修改为更现代的`fetch` API。
- **样式设计**: AI提供的基础样式进行了调整，增加了响应式设计和更好的视觉效果。
- **后端错误处理**: 增强了后端API的错误处理机制，添加了更详细的错误响应。

## 5. 运行与测试方式

### 本地运行方式

#### 前置条件
- JDK 1.8 或更高版本
- Maven 3.6 或更高版本
- MySQL 5.7 或更高版本

#### 环境准备
1. 创建MySQL数据库:
```sql
CREATE DATABASE todolist_demo CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

2. 配置数据库连接信息:
   - 编辑`application.yml`文件中的数据库连接信息
   - 确保用户名和密码与本地MySQL配置一致

#### 启动步骤
1. 编译项目:
```bash
mvn clean package -DskipTests
```

2. 启动应用:
```bash
mvn spring-boot:run
```

3. 访问应用:
   - 打开浏览器，访问 http://localhost:8000

### 已测试过的环境
- **操作系统**: Windows 10
- **JDK版本**: Oracle JDK 1.8
- **MySQL版本**: MySQL 8.0
- **浏览器**: Chrome 90+, Firefox 88+, Edge 90+

### 已知问题与不足
1. **错误处理**: 前端错误处理较为简单，仅使用`alert`提示，用户体验待优化。
2. **数据验证**: 后端缺乏完整的数据验证逻辑，主要依赖前端验证。
3. **分页功能**: 当待办事项数量较多时，列表展示效率较低，需添加分页功能。
4. **安全性**: 未实现用户认证和授权机制，仅适合个人使用或内部系统。
5. **构建配置**: Spring Boot Maven插件配置中`skip=true`可能导致打包后的jar文件缺少主清单属性。
6. **未实现进阶挑战功能**

## 6. 总结与反思

### 如果有更多时间，你会如何改进？
1. **添加用户认证系统**: 实现注册、登录和权限控制，支持多用户使用。
2. **优化数据验证**: 前后端实现统一的数据验证规则，提供更好的错误提示。
3. **增强UI体验**: 使用动画效果，实现拖拽排序，添加黑暗模式等功能。
4. **实现数据导入导出**: 支持CSV/JSON格式的数据导入导出，便于数据备份和迁移。
5. **添加统计分析**: 实现待办事项完成情况的统计图表，提供数据分析功能。
6. **集成推送通知**: 对于即将到期的任务，实现浏览器通知或邮件提醒功能。
7. **实现进阶挑战功能**

### 实现的最大亮点
1. **简洁的架构设计**: 采用经典的三层架构，代码结构清晰，易于理解和维护。
2. **良好的前后端分离**: 虽然是单体应用，但前后端职责明确，便于后续扩展为完全分离的架构。
3. **响应式设计**: 前端页面适配不同屏幕尺寸，提供良好的移动端体验。
4. **丰富的扩展功能**: 在基础Todo功能上，增加了分类、优先级、截止日期等实用功能。
5. **完整的CRUD操作**: 实现了待办事项的增删改查，满足基本的业务需求。
6. **优化的用户体验**: 优先级标签使用不同颜色，已完成任务有明显的视觉区分，操作反馈及时。